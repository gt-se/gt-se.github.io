!function(){"use strict";function t(){let n=this,s="grey";return n.init=function(){n.handleUpsalesIframeMessage();let l=document.querySelector("#up-form"),e=l.querySelector(".submit-button"),t=(l.closest(".template-scoped-style")?.removeAttribute("style"),setTimeout(function(){l.classList.add("form-theme--"+s)},500),l.querySelectorAll(".form-control")),o=l.querySelectorAll(".form-group");t&&t.forEach(function(e){var t=e.closest(".form-group");t&&n.addFloatingLabelBehavior(e,t)}),o&&o.forEach(function(e){n.addChoiceClass(e),n.optInCheckboxClickHandler(e)}),e&&e.querySelector("button")?.removeAttribute("style"),setTimeout(function(){const e=l.querySelector(".iti__flag-container");if(e){const o=e.closest(".form-group");var t;o&&(t=o.querySelector("input")?.offsetWidth,o.classList.add("form-group--flag-container"),o.querySelector("ul")?.style.minWidth=t+"px")}},500)},n.optInCheckboxClickHandler=function(e){const t=e.querySelector('input[type="checkbox"]'),o=e.querySelector(".opt-in-label");t&&o&&o.addEventListener("click",function(e){e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change",{bubbles:!0}))})},n.handleUpsalesIframeMessage=function(){window.addEventListener("message",e=>{e.data&&void 0!==e.data.formTheme&&(s=e.data.formTheme)})},n.addFloatingLabelBehavior=function(e,t){t.classList.add("floating-label"),n.addLabelTitle(e,t),setTimeout(function(){n.filledClassHandle(e,t)},1e3),e.addEventListener("focusin",function(e){t.classList.add("focus")}),e.addEventListener("focusout",function(e){t.classList.remove("focus")}),e.addEventListener("change",function(e){n.filledClassHandle(e.target,t)})},n.filledClassHandle=function(e,t){e.value&&0<e.value.length?t.classList.add("filled"):t.classList.remove("filled")},n.addLabelTitle=function(e,t){let o=t.querySelector("label");t=o?.textContent.trim();t&&0<t.length&&(o.setAttribute("title",t),e.setAttribute("title",t))},n.addChoiceClass=function(o){if(o.classList.contains("form-group")){var e=(e,t)=>{0!==e.length&&(o.classList.add("form-group--choice"),o.classList.add(t),"checkbox"===t&&e.forEach(e=>{o?.querySelector(".opt-in-label")&&(e.removeAttribute("style"),o.classList.add("checkbox--opt-in"))}),1<e.length&&o.classList.add("multiple"),e.forEach(e=>{const t=e.closest("label");if(t){t.classList.add("choice-wrapper"),t.removeAttribute("style");const o=document.createElement("span");o.classList.add("choice-icon"),t.appendChild(o)}}))},t=o.querySelectorAll('input[type="radio"]'),l=o.querySelectorAll('input[type="checkbox"]');const n=o.querySelectorAll("select");e(t,"radio"),e(l,"checkbox"),n.forEach(e=>{e.closest(".form-group")?.classList.add("form-group--select")})}},n}function e(){let e=new t;e.init()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.UpsaleFormFloatingLabel=t}();