!function(){"use strict";function t(){let l=this,s="grey";return l.init=function(){l.handleUpsalesIframeMessage();let n=document.querySelector("#up-form"),e=n.querySelector(".submit-button"),t=(n.closest(".template-scoped-style")?.removeAttribute("style"),setTimeout(function(){n.classList.add("form-theme--"+s)},500),n.querySelectorAll(".form-control")),o=n.querySelectorAll(".form-group");t&&t.forEach(function(e){var t=e.closest(".form-group");t&&l.addFloatingLabelBehavior(e,t)}),o&&o.forEach(function(e){l.addChoiceClass(e),l.optInCheckboxClickHandler(e)}),e&&e.querySelector("button")?.removeAttribute("style"),setTimeout(function(){const e=n.querySelector(".iti__flag-container");if(e){const o=e.closest(".form-group");if(o){var t=o.querySelector("input");const l=o.querySelector("ul");t&&(t=t.offsetWidth,o.classList.add("form-group--flag-container"),l&&(l.style.minWidth=t+"px"))}}},500)},l.optInCheckboxClickHandler=function(e){const t=e.querySelector('input[type="checkbox"]'),o=e.querySelector(".opt-in-label");t&&o&&o.addEventListener("click",function(e){e.preventDefault(),t.checked=!t.checked,t.dispatchEvent(new Event("change",{bubbles:!0}))})},l.handleUpsalesIframeMessage=function(){window.addEventListener("message",e=>{e.data&&void 0!==e.data.formTheme&&(s=e.data.formTheme)})},l.addFloatingLabelBehavior=function(e,t){t.classList.add("floating-label"),l.addLabelTitle(e,t),setTimeout(function(){l.filledClassHandle(e,t)},1e3),e.addEventListener("focusin",function(e){t.classList.add("focus")}),e.addEventListener("focusout",function(e){t.classList.remove("focus")}),e.addEventListener("change",function(e){l.filledClassHandle(e.target,t)})},l.filledClassHandle=function(e,t){e.value&&0<e.value.length?t.classList.add("filled"):t.classList.remove("filled")},l.addLabelTitle=function(e,t){let o=t.querySelector("label");t=o?.textContent.trim();t&&0<t.length&&(o.setAttribute("title",t),e.setAttribute("title",t))},l.addChoiceClass=function(o){if(o.classList.contains("form-group")){var e=(e,t)=>{0!==e.length&&(o.classList.add("form-group--choice"),o.classList.add(t),"checkbox"===t&&e.forEach(e=>{o?.querySelector(".opt-in-label")&&(e.removeAttribute("style"),o.classList.add("checkbox--opt-in"))}),1<e.length&&o.classList.add("multiple"),e.forEach(e=>{const t=e.closest("label");if(t){t.classList.add("choice-wrapper"),t.removeAttribute("style");const o=document.createElement("span");o.classList.add("choice-icon"),t.appendChild(o)}}))},t=o.querySelectorAll('input[type="radio"]'),l=o.querySelectorAll('input[type="checkbox"]');const n=o.querySelectorAll("select");e(t,"radio"),e(l,"checkbox"),n.forEach(e=>{e.closest(".form-group")?.classList.add("form-group--select")})}},l}function e(){let e=new t;e.init()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e(),window.UpsaleFormFloatingLabel=t}();